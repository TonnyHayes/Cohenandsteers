!function(e){e.fn.hoverIntent=function(t,s){var i={sensitivity:7,interval:100,timeout:0};i=e.extend(i,s?{over:t,out:s}:t);var n,a,r,o,l=!1,c=!1,h=function(e){n=e.pageX,a=e.pageY},d=function(t,s){return s.hoverIntent_t=clearTimeout(s.hoverIntent_t),Math.abs(r-n)+Math.abs(o-a)<i.sensitivity?(e(s).unbind("mousemove",h),s.hoverIntent_s=1,i.over.apply(s,[t])):(r=n,o=a,s.hoverIntent_t=setTimeout(function(){d(t,s)},i.interval),void 0)},u=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,i.out.apply(t,[e])},f=function(t){var s=jQuery.extend({},t),n=this;n.hoverIntent_t&&(n.hoverIntent_t=clearTimeout(n.hoverIntent_t)),"mouseenter"==t.type?(r=s.pageX,o=s.pageY,e(n).bind("mousemove",h),1!=n.hoverIntent_s&&(n.hoverIntent_t=setTimeout(function(){l&&(c=!0),l=!0,d(s,n)},i.interval))):(e(n).unbind("mousemove",h),1==n.hoverIntent_s&&setTimeout(function(){n.hoverIntent_t=setTimeout(function(){c?c=!1:l&&(l=!1),u(s,n)},c?i.timeoutIsOpen?i.timeoutIsOpen:i.timeout:i.timeout)},100))};return this.bind("mouseenter",f).bind("mouseleave",f)}}(jQuery),function(e){e.fn.charCount=function(t){function s(s){var i=e(s).val().length,n=t.allowed-i;n<=t.warning&&n>=0?e(s).next().addClass(t.cssWarning):e(s).next().removeClass(t.cssWarning),0>n?(e(s).closest("form").addClass("submit-disabled"),e(s).next().addClass(t.cssExceeded)):(e(s).closest("form").removeClass("submit-disabled"),e(s).removeClass(t.cssExceeded).next().removeClass(t.cssExceeded)),e(s).next().html(t.counterTextAfter===!0?n+t.counterText:t.counterText+n)}var i={allowed:140,warning:25,css:"counter",counterElement:"span",cssWarning:"warning",cssExceeded:"exceeded",counterText:"",counterTextAfter:!1},t=e.extend(i,t);this.each(function(){e(this).after("<"+t.counterElement+' class="'+t.css+'">'+t.counterText+"</"+t.counterElement+">"),s(this),e(this).keyup(function(){s(this)}),e(this).change(function(){s(this)})})}}(jQuery),function(e){e.fn.ieffembedfix=function(){var t="/assets/img/site/hIEfix.png";return this.each(function(){jQuery.support.objectAll===!1&&e(this).css({filter:'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'",sizingMethod=crop',zoom:"1"})})}}(jQuery),function(e){e.fn.slides=function(t){return t=e.extend({},e.fn.slides.option,t),this.each(function(){function s(s,i,n){if(!r&&a){switch(r=!0,t.animationStart(x+1),s){case"next":y=x,w=x+1,w=p===w?0:w,l=2*m,s=2*-m,x=w;break;case"prev":y=x,w=x-1,w=-1===w?p-1:w,l=0,s=0,x=w;break;case"pagination":w=parseInt(n,10),y=e("."+t.paginationClass+" li."+t.currentClass+" a",u).attr("href").match("[^#/]+$"),w>y?(l=2*m,s=2*-m):(l=0,s=0),x=w}"fade"===i?t.crossfade?f.children(":eq("+w+")",u).css({zIndex:10}).fadeIn(t.fadeSpeed,t.fadeEasing,function(){t.autoHeight?f.animate({height:f.children(":eq("+w+")",u).outerHeight()},t.autoHeightSpeed,function(){f.children(":eq("+y+")",u).css({display:"none",zIndex:0}),f.children(":eq("+w+")",u).css({zIndex:0}),t.animationComplete(w+1),r=!1}):(f.children(":eq("+y+")",u).css({display:"none",zIndex:0}),f.children(":eq("+w+")",u).css({zIndex:0}),t.animationComplete(w+1),r=!1)}):f.children(":eq("+y+")",u).fadeOut(t.fadeSpeed,t.fadeEasing,function(){t.autoHeight?f.animate({height:f.children(":eq("+w+")",u).outerHeight()},t.autoHeightSpeed,function(){f.children(":eq("+w+")",u).fadeIn(t.fadeSpeed,t.fadeEasing)}):f.children(":eq("+w+")",u).fadeIn(t.fadeSpeed,t.fadeEasing,function(){e.browser.msie&&e(this).get(0).style.removeAttribute("filter")}),t.animationComplete(w+1),r=!1}):(f.children(":eq("+w+")").css({left:l,display:"block"}),t.autoHeight?f.animate({left:s,height:f.children(":eq("+w+")").outerHeight()},t.slideSpeed,t.slideEasing,function(){f.css({left:-m}),f.children(":eq("+w+")").css({left:m,zIndex:5}),f.children(":eq("+y+")").css({left:m,display:"none",zIndex:0}),t.animationComplete(w+1),r=!1}):f.animate({left:s},t.slideSpeed,t.slideEasing,function(){f.css({left:-m}),f.children(":eq("+w+")").css({left:m,zIndex:5}),f.children(":eq("+y+")").css({left:m,display:"none",zIndex:0}),t.animationComplete(w+1),r=!1})),t.pagination&&(e("."+t.paginationClass+" li."+t.currentClass,u).removeClass(t.currentClass),e("."+t.paginationClass+" li:eq("+w+")",u).addClass(t.currentClass))}}function i(){clearInterval(u.data("interval"))}function n(){t.pause?(clearTimeout(u.data("pause")),clearInterval(u.data("interval")),h=setTimeout(function(){clearTimeout(u.data("pause")),d=setInterval(function(){s("next",b)},t.play),u.data("interval",d)},t.pause),u.data("pause",h)):i()}e("."+t.container,e(this)).children().wrapAll('<div class="slides_control"/>');var a,r,o,l,c,h,d,u=e(this),f=e(".slides_control",u),p=f.children().size(),m=f.children().outerWidth(),g=f.children().outerHeight(),v=t.start-1,b=t.effect.indexOf(",")<0?t.effect:t.effect.replace(" ","").split(",")[0],C=t.effect.indexOf(",")<0?b:t.effect.replace(" ","").split(",")[1],w=0,y=0,F=0,x=0;if(2>p)return e("."+t.container,e(this)).fadeIn(t.fadeSpeed,t.fadeEasing,function(){a=!0,t.slidesLoaded()}),e("."+t.next+", ."+t.prev).fadeOut(0),!1;if(!(2>p)){if(0>v&&(v=0),v>p&&(v=p-1),t.start&&(x=v),t.randomize&&f.randomize(),e("."+t.container,u).css({overflow:"hidden",position:"relative"}),f.children().css({position:"absolute",top:0,left:f.children().outerWidth(),zIndex:0,display:"none"}),f.css({position:"relative",width:3*m,height:g,left:-m}),e("."+t.container,u).css({display:"block"}),t.autoHeight&&(f.children().css({height:"auto"}),f.animate({height:f.children(":eq("+v+")").outerHeight()},t.autoHeightSpeed)),t.preload&&f.find("img:eq("+v+")").length){e("."+t.container,u).css({background:"url("+t.preloadImage+") no-repeat 50% 50%"});var S=f.find("img:eq("+v+")").attr("src")+"?"+(new Date).getTime();c="slides_control"!=e("img",u).parent().attr("class")?f.children(":eq(0)")[0].tagName.toLowerCase():f.find("img:eq("+v+")"),f.find("img:eq("+v+")").attr("src",S).load(function(){f.find(c+":eq("+v+")").fadeIn(t.fadeSpeed,t.fadeEasing,function(){e(this).css({zIndex:5}),e("."+t.container,u).css({background:""}),a=!0,t.slidesLoaded()})})}else f.children(":eq("+v+")").fadeIn(t.fadeSpeed,t.fadeEasing,function(){a=!0,t.slidesLoaded()});t.bigTarget&&(f.children().css({cursor:"pointer"}),f.children().click(function(){return s("next",b),!1})),t.hoverPause&&t.play&&(f.bind("mouseover",function(){i()}),f.bind("mouseleave",function(){n()})),t.generateNextPrev&&(e("."+t.container,u).after('<a href="#" class="'+t.prev+'">Prev</a>'),e("."+t.prev,u).after('<a href="#" class="'+t.next+'">Next</a>')),e("."+t.next,u).click(function(e){e.preventDefault(),t.play&&n(),s("next",b)}),e("."+t.prev,u).click(function(e){e.preventDefault(),t.play&&n(),s("prev",b)}),t.generatePagination?(t.prependPagination?u.prepend("<ul class="+t.paginationClass+"></ul>"):u.append("<ul class="+t.paginationClass+"></ul>"),f.children().each(function(){e("."+t.paginationClass,u).append('<li><a href="#'+F+'">'+(F+1)+"</a></li>"),F++})):e("."+t.paginationClass+" li a",u).each(function(){e(this).attr("href","#"+F),F++}),e("."+t.paginationClass+" li:eq("+v+")",u).addClass(t.currentClass),e("."+t.paginationClass+" li a",u).click(function(){return t.play&&n(),o=e(this).attr("href").match("[^#/]+$"),x!=o&&s("pagination",C,o),!1}),e("a.link",u).click(function(){return t.play&&n(),o=e(this).attr("href").match("[^#/]+$")-1,x!=o&&s("pagination",C,o),!1}),t.play&&(d=setInterval(function(){s("next",b)},t.play),u.data("interval",d))}})},e.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,prependPagination:!1,paginationClass:"pagination",currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}},e.fn.randomize=function(t){function s(){return Math.round(Math.random())-.5}return e(this).each(function(){var n=e(this),a=n.children(),r=a.length;if(r>1){a.hide();var o=[];for(i=0;r>i;i++)o[o.length]=i;o=o.sort(s),e.each(o,function(e,s){var i=a.eq(s),r=i.clone(!0);r.show().appendTo(n),void 0!==t&&t(i,r),i.remove()})}})}}(jQuery),function(e){function t(t,s,i){var n=document.createElement(t);return s&&n.setAttribute("class",f+s),i&&e(n).css(i),e(n)}function s(s,i){var n=t(p,"-wrapper",i);e(s).before(n),e(s).appendTo(n)}function i(){var t=this,s=e.data(this,u),i=s._settings,a=!1,r=!1;i.anchored&&e(i.anchoredTo).length&&(l=e(i.anchoredTo).offset().top),e(window).scroll(function(){a=!0}),e(window).resize(function(){r=!0}),n.call(t,s,i),setInterval(function(){(a||r)&&(a=!1,r=!1,n.call(t,s,i))},i.delay)}function n(t,s){a=e(this),r=a.parent(),r.offset().top!=t._offset&&(t._offset=r.offset().top),t._offset-t._topCatch-s.fromTop<=e(document).scrollTop()?(t._isAnchored||(a.addClass("s-fixed"),a.css("top",t._topCatch+s.fromTop)),s.fullWidth===!0&&a.css("width","100%")):a.removeClass("s-fixed");var i=this;!function(){s.anchored===!0&&(o=a.height()+s.fromTop+t._topCatch+e(document).scrollTop(),c=e(document).scrollTop()+e(window).height(),!t._isAnchored&&o>=l?(t._isAnchored=!0,a.addClass("s-anchored").css("top","auto"),r.addClass("s-anchored"),"function"==typeof s.anchorOn&&s.anchorOn.call(i)):t._isAnchored&&l>=o&&(t._isAnchored=!1,a.removeClass("s-anchored"),r.removeClass("s-anchored"),a.css("top",t._topCatch+s.fromTop),"function"==typeof s.anchorOff&&s.anchorOff.call(i)),!t._anchorIsVisible&&c>=l?(t._anchorIsVisible=!0,"function"==typeof s.anchorVisible&&s.anchorVisible.call(i)):t._anchorIsVisible&&l>=c&&(t._anchorIsVisible=!1,"function"==typeof s.anchorInvisible&&s.anchorInvisible.call(i)))}()}var a,r,o,l,c,h={absolute:!1,anchored:!1,anchoredTo:".anchoredTo",anchorOn:!1,anchorOff:!1,anchorVisible:!1,anchorInvisible:!1,inFlow:!0,relativeToOtherStickies:!0,fullWidth:!1,delay:10,fromTop:10},d=0,u="sticky",f="sticky",p="div",m={init:function(t){var n=e.extend(!0,{},h,t);return this.each(function(){var t=e(this),a=e.data(this,u,{_settings:n,_offset:t.offset().top,_height:t.height(),_width:t.width(),_float:t.css("float"),_topCatch:0,_isAnchored:!1,_anchorIsVisible:!1});n.relativeToOtherStickies&&(a._topCatch=d,d+=a._height),n.inFlow===!0?s(this,{width:a._width,"float":a._float}):n.absolute===!0&&(s(this,{position:"absolute",top:t.css("top")}),t.css("top","0")),i.apply(this)})}};e.fn.sticky=function(t){return m[t]?m[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?e.error("Method "+t+" does not exist on jQuery.sticky"):m.init.apply(this,arguments)}}(jQuery),$.fn.toggler=function(e){var t,s={toggleEvent:"click",delay:250,forceClose:!0,toggleName:"toggle",trigger:".trigger-toggle",content:".content",callback:!1,animation:"slideToggle",clickOff:!1},i=$.extend(s,e),n=[];return this.each(function(){var e=$(this),s=e.find(i.trigger),a=e.find(i.content);a.each(function(){n.push(this)}),a.is(":visible")?e.addClass("s-active"):e.removeClass("s-active"),i.clickOff&&a.hover(function(){t=!0},function(){t=!1}),s.bind(i.toggleEvent,function(s){function r(e){var t,s,a,r=n.length,o=0,l=!1;for(o;r>o;o++)if(a=$(n[o]),a.is(":visible")){a.parent().removeClass("s-active"),a[i.animation](),l=!0,t=setInterval(function(){return a.is(":animated")?null:(l=!1,clearInterval(t),void 0)},30);break}s=setInterval(function(){"function"!=typeof e||l||(e(),clearInterval(s))},30)}function o(){l.closest(e).toggleClass("s-active"),l.siblings(a)[i.animation](i.delay,function(){return"function"==typeof i.fn&&i.callback(),null})}s.preventDefault(),s.stopPropagation();var l=$(this);!function(){i.clickOff&&$("body")[i.toggleEvent](function(){t||r()}),1==i.forceClose&&n.length>1?l.siblings(i.content).is(":visible")?o():r(o):o()}()})})},function(e){e.uniform={options:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:!0,idPrefix:"uniform",resetSelector:!1,autoHide:!0},elements:[]},e.support.selectOpacity=e.browser.msie&&e.browser.version<7?!1:!0,e.fn.uniform=function(t){function s(t){$el=e(t),$el.addClass($el.attr("type")),c(t)}function i(t){e(t).addClass("uniform"),c(t)}function n(s){var i=e(s),n=e("<div>"),a=e("<span>");n.addClass(t.buttonClass),t.useID&&""!=i.attr("id")&&n.attr("id",t.idPrefix+"-"+i.attr("id"));var r;i.is("a")||i.is("button")?r=i.text():(i.is(":submit")||i.is(":reset")||i.is("input[type=button]"))&&(r=i.attr("value")),r=""==r?i.is(":reset")?"Reset":"Submit":r,a.html(r),i.css("opacity",0),i.wrap(n),i.wrap(a),n=i.closest("div"),a=i.closest("span"),i.is(":disabled")&&n.addClass(t.disabledClass),n.bind({"mouseenter.uniform":function(){n.addClass(t.hoverClass)},"mouseleave.uniform":function(){n.removeClass(t.hoverClass),n.removeClass(t.activeClass)},"mousedown.uniform touchbegin.uniform":function(){n.addClass(t.activeClass)},"mouseup.uniform touchend.uniform":function(){n.removeClass(t.activeClass)},"click.uniform touchend.uniform":function(t){if(e(t.target).is("span")||e(t.target).is("div"))if(s[0].dispatchEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),s[0].dispatchEvent(i)}else s[0].click()}}),s.bind({"focus.uniform":function(){n.addClass(t.focusClass)},"blur.uniform":function(){n.removeClass(t.focusClass)}}),e.uniform.noSelect(n),c(s)}function a(s){var i=e(s),n=e("<div />"),a=e("<span />");"none"==!i.css("display")&&t.autoHide&&n.hide(),n.addClass(t.selectClass),t.useID&&""!=s.attr("id")&&n.attr("id",t.idPrefix+"-"+s.attr("id"));var r=s.find(":selected:first");0==r.length&&(r=s.find("option:first")),a.html(r.html()),s.css("opacity",0),s.wrap(n),s.before(a),n=s.parent("div"),a=s.siblings("span"),s.bind({"change.uniform":function(){a.text(s.find(":selected").html()),n.removeClass(t.activeClass)},"focus.uniform":function(){n.addClass(t.focusClass)},"blur.uniform":function(){n.removeClass(t.focusClass),n.removeClass(t.activeClass)},"mousedown.uniform touchbegin.uniform":function(){n.addClass(t.activeClass)},"mouseup.uniform touchend.uniform":function(){n.removeClass(t.activeClass)},"click.uniform touchend.uniform":function(){n.removeClass(t.activeClass)},"mouseenter.uniform":function(){n.addClass(t.hoverClass)},"mouseleave.uniform":function(){n.removeClass(t.hoverClass),n.removeClass(t.activeClass)},"keyup.uniform":function(){a.text(s.find(":selected").html())}}),e(s).attr("disabled")&&n.addClass(t.disabledClass),e.uniform.noSelect(a),c(s)}function r(s){var i=e(s),n=e("<div />"),a=e("<span />");"none"==!i.css("display")&&t.autoHide&&n.hide(),n.addClass(t.checkboxClass),t.useID&&""!=s.attr("id")&&n.attr("id",t.idPrefix+"-"+s.attr("id")),e(s).wrap(n),e(s).wrap(a),a=s.parent(),n=a.parent(),e(s).css("opacity",0).bind({"focus.uniform":function(){n.addClass(t.focusClass)},"blur.uniform":function(){n.removeClass(t.focusClass)},"click.uniform touchend.uniform":function(){e(s).attr("checked")?a.addClass(t.checkedClass):a.removeClass(t.checkedClass)},"mousedown.uniform touchbegin.uniform":function(){n.addClass(t.activeClass)},"mouseup.uniform touchend.uniform":function(){n.removeClass(t.activeClass)},"mouseenter.uniform":function(){n.addClass(t.hoverClass)},"mouseleave.uniform":function(){n.removeClass(t.hoverClass),n.removeClass(t.activeClass)}}),e(s).attr("checked")&&a.addClass(t.checkedClass),e(s).attr("disabled")&&n.addClass(t.disabledClass),c(s)}function o(s){var i=e(s),n=e("<div />"),a=e("<span />");"none"==!i.css("display")&&t.autoHide&&n.hide(),n.addClass(t.radioClass),t.useID&&""!=s.attr("id")&&n.attr("id",t.idPrefix+"-"+s.attr("id")),e(s).wrap(n),e(s).wrap(a),a=s.parent(),n=a.parent(),e(s).css("opacity",0).bind({"focus.uniform":function(){n.addClass(t.focusClass)},"blur.uniform":function(){n.removeClass(t.focusClass)},"click.uniform touchend.uniform":function(){if(e(s).attr("checked")){var i=t.radioClass.split(" ")[0];e("."+i+" span."+t.checkedClass+":has([name='"+e(s).attr("name")+"'])").removeClass(t.checkedClass),a.addClass(t.checkedClass)}else a.removeClass(t.checkedClass)},"mousedown.uniform touchend.uniform":function(){e(s).is(":disabled")||n.addClass(t.activeClass)},"mouseup.uniform touchbegin.uniform":function(){n.removeClass(t.activeClass)},"mouseenter.uniform touchend.uniform":function(){n.addClass(t.hoverClass)},"mouseleave.uniform":function(){n.removeClass(t.hoverClass),n.removeClass(t.activeClass)}}),e(s).attr("checked")&&a.addClass(t.checkedClass),e(s).attr("disabled")&&n.addClass(t.disabledClass),c(s)}function l(s){var i=e(s),n=e("<div />"),a=e("<span>"+t.fileDefaultText+"</span>"),r=e("<span>"+t.fileBtnText+"</span>");if("none"==!i.css("display")&&t.autoHide&&n.hide(),n.addClass(t.fileClass),a.addClass(t.filenameClass),r.addClass(t.fileBtnClass),t.useID&&""!=i.attr("id")&&n.attr("id",t.idPrefix+"-"+i.attr("id")),i.wrap(n),i.after(r),i.after(a),n=i.closest("div"),a=i.siblings("."+t.filenameClass),r=i.siblings("."+t.fileBtnClass),!i.attr("size")){var o=n.width();i.attr("size",o/10)}var l=function(){var e=i.val();""===e?e=t.fileDefaultText:(e=e.split(/[\/\\]+/),e=e[e.length-1]),a.text(e)};l(),i.css("opacity",0).bind({"focus.uniform":function(){n.addClass(t.focusClass)},"blur.uniform":function(){n.removeClass(t.focusClass)},"mousedown.uniform":function(){e(s).is(":disabled")||n.addClass(t.activeClass)},"mouseup.uniform":function(){n.removeClass(t.activeClass)},"mouseenter.uniform":function(){n.addClass(t.hoverClass)},"mouseleave.uniform":function(){n.removeClass(t.hoverClass),n.removeClass(t.activeClass)}}),e.browser.msie?i.bind("click.uniform.ie7",function(){setTimeout(l,0)}):i.bind("change.uniform",l),i.attr("disabled")&&n.addClass(t.disabledClass),e.uniform.noSelect(a),e.uniform.noSelect(r),c(s)}function c(t){t=e(t).get(),t.length>1?e.each(t,function(t,s){e.uniform.elements.push(s)}):e.uniform.elements.push(t)}t=e.extend(e.uniform.options,t);var h=this;return 0!=t.resetSelector&&e(t.resetSelector).mouseup(function(){function t(){e.uniform.update(h)}setTimeout(t,10)}),e.uniform.restore=function(t){void 0==t&&(t=e(e.uniform.elements)),e(t).each(function(){e(this).is(":checkbox")?e(this).unwrap().unwrap():e(this).is("select")?(e(this).siblings("span").remove(),e(this).unwrap()):e(this).is(":radio")?e(this).unwrap().unwrap():e(this).is(":file")?(e(this).siblings("span").remove(),e(this).unwrap()):e(this).is("button, :submit, :reset, a, input[type='button']")&&e(this).unwrap().unwrap(),e(this).unbind(".uniform"),e(this).css("opacity","1");var s=e.inArray(e(t),e.uniform.elements);e.uniform.elements.splice(s,1)})},e.uniform.noSelect=function(t){function s(){return!1}e(t).each(function(){this.onselectstart=this.ondragstart=s,e(this).mousedown(s).css({MozUserSelect:"none"})})},e.uniform.update=function(s){void 0==s&&(s=e(e.uniform.elements)),s=e(s),s.each(function(){var i=e(this);if(i.is("select")){var n=i.siblings("span"),a=i.parent("div");a.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass),n.html(i.find(":selected").html()),i.is(":disabled")?a.addClass(t.disabledClass):a.removeClass(t.disabledClass)}else if(i.is(":checkbox")){var n=i.closest("span"),a=i.closest("div");a.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass),n.removeClass(t.checkedClass),i.is(":checked")&&n.addClass(t.checkedClass),i.is(":disabled")?a.addClass(t.disabledClass):a.removeClass(t.disabledClass)}else if(i.is(":radio")){var n=i.closest("span"),a=i.closest("div");a.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass),n.removeClass(t.checkedClass),i.is(":checked")&&n.addClass(t.checkedClass),i.is(":disabled")?a.addClass(t.disabledClass):a.removeClass(t.disabledClass)}else if(i.is(":file")){var a=i.parent("div"),r=i.siblings(t.filenameClass);btnTag=i.siblings(t.fileBtnClass),a.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass),r.text(i.val()),i.is(":disabled")?a.addClass(t.disabledClass):a.removeClass(t.disabledClass)}else if(i.is(":submit")||i.is(":reset")||i.is("button")||i.is("a")||s.is("input[type=button]")){var a=i.closest("div");a.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass),i.is(":disabled")?a.addClass(t.disabledClass):a.removeClass(t.disabledClass)}})},this.each(function(){if(e.support.selectOpacity){var t=e(this);t.is("select")?1!=t.attr("multiple")&&(void 0==t.attr("size")||t.attr("size")<=1)&&a(t):t.is(":checkbox")?r(t):t.is(":radio")?o(t):t.is(":file")?l(t):t.is(":text, :password, input[type='email']")?s(t):t.is("textarea")?i(t):(t.is("a")||t.is(":submit")||t.is(":reset")||t.is("button")||t.is("input[type=button]"))&&n(t)}})}}(jQuery),function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"),void 0;var s=e.data(this[0],"validator");if(s)return s;if(this.attr("novalidate","novalidate"),s=new e.validator(t,this[0]),e.data(this[0],"validator",s),s.settings.onsubmit){var i=this.find("input, button");i.filter(".cancel").click(function(){s.cancelSubmit=!0}),s.settings.submitHandler&&i.filter(":submit").click(function(){s.submitButton=this}),this.submit(function(t){function i(){if(s.settings.submitHandler){if(s.submitButton)var t=e("<input type='hidden'/>").attr("name",s.submitButton.name).val(s.submitButton.value).appendTo(s.currentForm);return s.settings.submitHandler.call(s,s.currentForm),s.submitButton&&t.remove(),!1}return!0}return s.settings.debug&&t.preventDefault(),s.cancelSubmit?(s.cancelSubmit=!1,i()):s.form()?s.pendingRequest?(s.formSubmitted=!0,!1):i():(s.focusInvalid(),!1)})}return s},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,s=e(this[0].form).validate();return this.each(function(){t&=s.element(this)}),t},removeAttrs:function(t){var s={},i=this;return e.each(t.split(/\s/),function(e,t){s[t]=i.attr(t),i.removeAttr(t)}),s},rules:function(t,s){var i=this[0];if(t){var n=e.data(i.form,"validator").settings,a=n.rules,r=e.validator.staticRules(i);switch(t){case"add":e.extend(r,e.validator.normalizeRule(s)),a[i.name]=r,s.messages&&(n.messages[i.name]=e.extend(n.messages[i.name],s.messages));break;case"remove":if(!s)return delete a[i.name],r;var o={};return e.each(s.split(/\s/),function(e,t){o[t]=r[t],delete r[t]}),o}}var l=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(i),e.validator.classRules(i),e.validator.attributeRules(i),e.validator.staticRules(i)),i);if(l.required){var c=l.required;delete l.required,l=e.extend({required:c},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,s){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=s,this.init()},e.validator.format=function(t,s){return 1==arguments.length?function(){var s=e.makeArray(arguments);return s.unshift(t),e.validator.format.apply(this,s)}:(arguments.length>2&&s.constructor!=Array&&(s=e.makeArray(arguments).slice(1)),s.constructor!=Array&&(s=[s]),e.each(s,function(e,s){t=t.replace(new RegExp("\\{"+e+"\\}","g"),s)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,s,i){"radio"===t.type?this.findByName(t.name).addClass(s).removeClass(i):e(t).addClass(s).removeClass(i)},unhighlight:function(t,s,i){"radio"===t.type?this.findByName(t.name).removeClass(s).addClass(i):e(t).removeClass(s).addClass(i)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var s=e.data(this[0].form,"validator"),i="on"+t.type.replace(/^validate/,"");s.settings[i]&&s.settings[i].call(s,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var s=this.groups={};e.each(this.settings.groups,function(t,i){e.each(i.split(/\s/),function(e,i){s[i]=t})});var i=this.settings.rules;e.each(i,function(t,s){i[t]=e.validator.normalizeRule(s)}),e(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var s=this.check(t);return s?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),s},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var s in t)this.errorList.push({message:t[s],element:this.findByName(s)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var s in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1==e.grep(this.errorList,function(e){return e.element.name==t.name}).length&&t},elements:function(){var t=this,s={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in s||!t.objectLength(e(this).rules())?!1:(s[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){return e(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(t){t=this.validationTargetFor(this.clean(t));var s=e(t).rules(),i=!1;for(var n in s){var a={method:n,parameters:s[n]};try{var r=e.validator.methods[n].call(this,t.value.replace(/\r/g,""),t,a.parameters);if("dependency-mismatch"==r){i=!0;continue}if(i=!1,"pending"==r)return this.toHide=this.toHide.not(this.errorsFor(t)),void 0;if(!r)return this.formatAndAdd(t,a),!1}catch(o){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+a.method+"' method",o),o}}return i?void 0:(this.objectLength(s)&&this.successList.push(t),!0)},customMetaMessage:function(t,s){if(e.metadata){var i=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return i&&i.messages&&i.messages[s]}},customMessage:function(e,t){var s=this.settings.messages[e];return s&&(s.constructor==String?s:s[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,s){return this.findDefined(this.customMessage(t.name,s),this.customMetaMessage(t,s),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[s],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(e,t){var s=this.defaultMessage(e,t.method),i=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,t.parameters,e):i.test(s)&&(s=jQuery.format(s.replace(i,"{$1}"),t.parameters)),this.errorList.push({message:s,element:e}),this.errorMap[e.name]=s,this.submitted[e.name]=s},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(var e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(var e=0,s=this.validElements();s[e];e++)this.settings.unhighlight.call(this,s[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,s){var i=this.errorsFor(t);i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.attr("generated")&&i.html(s)):(i=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(s||""),this.settings.wrapper&&(i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(i).length||(this.settings.errorPlacement?this.settings.errorPlacement(i,e(t)):i.insertAfter(t))),!s&&this.settings.success&&(i.text(""),"string"==typeof this.settings.success?i.addClass(this.settings.success):this.settings.success(i)),this.toShow=this.toShow.add(i)
},errorsFor:function(t){var s=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")==s})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){var s=this.currentForm;return e(document.getElementsByName(t)).map(function(e,i){return i.form==s&&i.name==t&&i||null})},getLength:function(t,s){switch(s.nodeName.toLowerCase()){case"select":return e("option:selected",s).length;case"input":if(this.checkable(s))return this.findByName(s.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,s){return!!e(t,s.form).length},"function":function(e,t){return e(t)}},optional:function(t){return!e.validator.methods.required.call(this,e.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,s){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],s&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!s&&0==this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,s){t.constructor==String?this.classRuleSettings[t]=s:e.extend(this.classRuleSettings,t)},classRules:function(t){var s={},i=e(t).attr("class");return i&&e.each(i.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(s,e.validator.classRuleSettings[this])}),s},attributeRules:function(t){var s={},i=e(t);for(var n in e.validator.methods){var a;a="required"===n&&"function"==typeof e.fn.prop?i.prop(n):i.attr(n),a?s[n]=a:i[0].getAttribute("type")===n&&(s[n]=!0)}return s.maxlength&&/-1|2147483647|524288/.test(s.maxlength)&&delete s.maxlength,s},metadataRules:function(t){if(!e.metadata)return{};var s=e.data(t.form,"validator").settings.meta;return s?e(t).metadata()[s]:e(t).metadata()},staticRules:function(t){var s={},i=e.data(t.form,"validator");return i.settings.rules&&(s=e.validator.normalizeRule(i.settings.rules[t.name])||{}),s},normalizeRules:function(t,s){return e.each(t,function(i,n){if(n===!1)return delete t[i],void 0;if(n.param||n.depends){var a=!0;switch(typeof n.depends){case"string":a=!!e(n.depends,s.form).length;break;case"function":a=n.depends.call(s,s)}a?t[i]=void 0!==n.param?n.param:!0:delete t[i]}}),e.each(t,function(i,n){t[i]=e.isFunction(n)?n(s):n}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if("string"==typeof t){var s={};e.each(t.split(/\s/),function(){s[this]=!0}),t=s}return t},addMethod:function(t,s,i){e.validator.methods[t]=s,e.validator.messages[t]=void 0!=i?i:e.validator.messages[t],s.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,s,i){if(!this.depend(i,s))return"dependency-mismatch";switch(s.nodeName.toLowerCase()){case"select":var n=e(s).val();return n&&n.length>0;case"input":if(this.checkable(s))return this.getLength(t,s)>0;default:return e.trim(t).length>0}},remote:function(t,s,i){if(this.optional(s))return"dependency-mismatch";var n=this.previousValue(s);if(this.settings.messages[s.name]||(this.settings.messages[s.name]={}),n.originalMessage=this.settings.messages[s.name].remote,this.settings.messages[s.name].remote=n.message,i="string"==typeof i&&{url:i}||i,this.pending[s.name])return"pending";if(n.old===t)return n.valid;n.old=t;var a=this;this.startRequest(s);var r={};return r[s.name]=t,e.ajax(e.extend(!0,{url:i,mode:"abort",port:"validate"+s.name,dataType:"json",data:r,success:function(i){a.settings.messages[s.name].remote=n.originalMessage;var r=i===!0;if(r){var o=a.formSubmitted;a.prepareElement(s),a.formSubmitted=o,a.successList.push(s),a.showErrors()}else{var l={},c=i||a.defaultMessage(s,"remote");l[s.name]=n.message=e.isFunction(c)?c(t):c,a.showErrors(l)}n.valid=r,a.stopRequest(s,r)}},i)),"pending"},minlength:function(t,s,i){return this.optional(s)||this.getLength(e.trim(t),s)>=i},maxlength:function(t,s,i){return this.optional(s)||this.getLength(e.trim(t),s)<=i},rangelength:function(t,s,i){var n=this.getLength(e.trim(t),s);return this.optional(s)||n>=i[0]&&n<=i[1]},min:function(e,t,s){return this.optional(t)||e>=s},max:function(e,t,s){return this.optional(t)||s>=e},range:function(e,t,s){return this.optional(t)||e>=s[0]&&e<=s[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 -]+/.test(e))return!1;var s=0,i=0,n=!1;e=e.replace(/\D/g,"");for(var a=e.length-1;a>=0;a--){var r=e.charAt(a),i=parseInt(r,10);n&&(i*=2)>9&&(i-=9),s+=i,n=!n}return s%10==0},accept:function(e,t,s){return s="string"==typeof s?s.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+s+")$","i"))},equalTo:function(t,s,i){var n=e(i).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(s).valid()});return t==n.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,s,i){var n=e.port;"abort"==e.mode&&(t[n]&&t[n].abort(),t[n]=i)});else{var s=e.ajax;e.ajax=function(i){var n=("mode"in i?i:e.ajaxSettings).mode,a=("port"in i?i:e.ajaxSettings).port;return"abort"==n?(t[a]&&t[a].abort(),t[a]=s.apply(this,arguments)):s.apply(this,arguments)}}}(jQuery),function(e){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||e.each({focus:"focusin",blur:"focusout"},function(t,s){function i(t){return t=e.event.fix(t),t.type=s,e.event.handle.call(this,t)}e.event.special[s]={setup:function(){this.addEventListener(t,i,!0)},teardown:function(){this.removeEventListener(t,i,!0)},handler:function(t){return arguments[0]=e.event.fix(t),arguments[0].type=s,e.event.handle.apply(this,arguments)}}}),e.extend(e.fn,{validateDelegate:function(t,s,i){return this.bind(s,function(s){var n=e(s.target);return n.is(t)?i.apply(n,arguments):void 0})}})}(jQuery),function(e){function t(){h||(e("form").live("reset",function(){e(this).find("."+l).each(n)}),e("."+l).live("keydown",i).live("mousedown",i).live("mouseup",i).live("mouseclick",i).live("focus",i).live("focusin",i).live("blur",n).live("focusout",n).live("change",s),e("."+c).live("click",function(){e(e(this).data(l)).focus()}).live("mouseup",function(){e(e(this).data(l)).focus()}),bound=!0,h=!0)}function s(){var t=e(this);return t.val()?(e(t.data(c)).hide(),void 0):(1!=t.data(l+"FOCUSED")&&a(t),void 0)}function i(){e(e(this).data(l+"FOCUSED",1).data(c)).hide()}function n(){var t=this;a(e(this).removeData(l+"FOCUSED")),setTimeout(function(){var s=e(t);1!=s.data(l+"FOCUSED")&&a(s)},200)}function a(t,s){var i=e(t.data(c));!s&&"none"!=i.css("display")||t.val()||i.text(t.attr("placeholder")).css("top",t.position().top+"px").css("left",t.position().left+"px").css("display","block")}function r(){f&&window.clearTimeout(f),f=window.setTimeout(o,50)}function o(){e("."+l).each(function(){var t=e(this),s=e(this).data(l+"FOCUSED");s||a(t,!0)})}var l="PLACEHOLDER-INPUT",c="PLACEHOLDER-LABEL",h=!1,d={labelClass:"placeholder"},u=document.createElement("input");if("placeholder"in u)return e.fn.placeholder=e.fn.unplaceholder=function(){},delete u,void 0;delete u,e(window).resize(r),e.fn.placeholder=function(s){t();var a=e.extend(d,s);this.each(function(){var t=Math.random().toString(32).replace(/\./,""),s=e(this),r=e('<label style="position:absolute;display:none;top:0;left:0;"></label>');s.attr("placeholder")&&s.data(l)!==l&&(s.attr("id")||s.attr("id","input_"+t),r.attr("id",s.attr("id")+"_placeholder").data(l,"#"+s.attr("id")).attr("for",s.attr("id")).addClass(a.labelClass).addClass(a.labelClass+"-for-"+this.tagName.toLowerCase()).addClass(c).text(s.attr("placeholder")),s.data(c,"#"+r.attr("id")).data(l,l).addClass(l).after(r),i.call(this),n.call(this))})},e.fn.unplaceholder=function(){this.each(function(){var t=e(this),i=e(t.data(c));t.data(l)===l&&(i.remove(),t.removeData(l).removeData(c).removeClass(l).unbind("change",s))})};var f}(jQuery),$(function(){$(".instr-input").focus(function(){{var e=$(this),t=e.siblings(".instr-label");t.text()}t.hide()}).blur(function(){var e=$(this),t=e.siblings(".instr-label"),s=t.text();(""===e.val()||e.val()===s)&&t.show()}).blur(),$(document).delegate(".instr-label","click",function(){$(this).siblings(".instr-input").focus()})}),function(e){void 0===e.fn.each2&&e.fn.extend({each2:function(t){for(var s=e([0]),i=-1,n=this.length;n>++i&&(s.context=s[0]=this[i])&&t.call(s[0],i,s)!==!1;);return this}})}(jQuery),function(e,t){"use strict";function s(e,t){for(var s=0,n=t.length;n>s;s+=1)if(i(e,t[s]))return s;return-1}function i(e,s){return e===s?!0:e===t||s===t?!1:null===e||null===s?!1:e.constructor===String?e+""==s+"":s.constructor===String?s+""==e+"":!1}function n(t,s){var i,n,a;if(null===t||1>t.length)return[];for(i=t.split(s),n=0,a=i.length;a>n;n+=1)i[n]=e.trim(i[n]);return i}function a(e){return e.outerWidth(!1)-e.width()}function r(s){var i="keyup-change-value";s.bind("keydown",function(){e.data(s,i)===t&&e.data(s,i,s.val())}),s.bind("keyup",function(){var n=e.data(s,i);n!==t&&s.val()!==n&&(e.removeData(s,i),s.trigger("keyup-change"))})}function o(s){s.bind("mousemove",function(s){var i=_;(i===t||i.x!==s.pageX||i.y!==s.pageY)&&e(s.target).trigger("mousemove-filtered",s)})}function l(e,s,i){i=i||t;var n;return function(){var t=arguments;window.clearTimeout(n),n=window.setTimeout(function(){s.apply(i,t)},e)}}function c(e){var t,s=!1;return function(){return s===!1&&(t=e(),s=!0),t}}function h(e,t){var i=l(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){s(e.target,t.get())>=0&&i(e)})}function d(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,s=e[0],i=e.val().length;e.focus(),e.is(":visible")&&s===document.activeElement&&(s.setSelectionRange?s.setSelectionRange(i,i):s.createTextRange&&(t=s.createTextRange(),t.collapse(!1),t.select()))},0)}function u(e){e.preventDefault(),e.stopPropagation()}function f(e){e.preventDefault(),e.stopImmediatePropagation()}function p(t){if(!I){var s=t[0].currentStyle||window.getComputedStyle(t[0],null);I=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:s.fontSize,fontFamily:s.fontFamily,fontStyle:s.fontStyle,fontWeight:s.fontWeight,letterSpacing:s.letterSpacing,textTransform:s.textTransform,whiteSpace:"nowrap"}),I.attr("class","select2-sizer"),e("body").append(I)}return I.text(t.val()),I.width()}function m(t,s,i){var n,a,r=[];n=t.attr("class"),n&&(n=""+n,e(n.split(" ")).each2(function(){0===this.indexOf("select2-")&&r.push(this)})),n=s.attr("class"),n&&(n=""+n,e(n.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(a=i(this),a&&r.push(this))})),t.attr("class",r.join(" "))}function g(e,s,i,n){var a=e.toUpperCase().indexOf(s.toUpperCase()),r=s.length;return 0>a?(i.push(n(e)),t):(i.push(n(e.substring(0,a))),i.push("<span class='select2-match'>"),i.push(n(e.substring(a,a+r))),i.push("</span>"),i.push(n(e.substring(a+r,e.length))),t)}function v(t){var s,i=0,n=null,a=t.quietMillis||100,r=t.url,o=this;return function(l){window.clearTimeout(s),s=window.setTimeout(function(){i+=1;var s=i,a=t.data,c=r,h=t.transport||e.ajax,d=t.type||"GET",u={};a=a?a.call(o,l.term,l.page,l.context):null,c="function"==typeof c?c.call(o,l.term,l.page,l.context):c,null!==n&&n.abort(),t.params&&(e.isFunction(t.params)?e.extend(u,t.params.call(o)):e.extend(u,t.params)),e.extend(u,{url:c,dataType:t.dataType,data:a,type:d,cache:!1,success:function(e){if(!(i>s)){var n=t.results(e,l.page);l.callback(n)}}}),n=h.call(o,u)},a)}}function b(s){var i,n,a=s,r=function(e){return""+e.text};e.isArray(a)&&(n=a,a={results:n}),e.isFunction(a)===!1&&(n=a,a=function(){return n});var o=a();return o.text&&(r=o.text,e.isFunction(r)||(i=a.text,r=function(e){return e[i]})),function(s){var i,n=s.term,o={results:[]};return""===n?(s.callback(a()),t):(i=function(t,a){var o,l;if(t=t[0],t.children){o={};for(l in t)t.hasOwnProperty(l)&&(o[l]=t[l]);o.children=[],e(t.children).each2(function(e,t){i(t,o.children)}),(o.children.length||s.matcher(n,r(o),t))&&a.push(o)}else s.matcher(n,r(t),t)&&a.push(t)},e(a().results).each2(function(e,t){i(t,o.results)}),s.callback(o),t)}}function C(s){var i=e.isFunction(s);return function(n){var a=n.term,r={results:[]};e(i?s():s).each(function(){var e=this.text!==t,s=e?this.text:this;(""===a||n.matcher(a,s))&&r.results.push(e?this:{id:this,text:this})}),n.callback(r)}}function w(t){if(e.isFunction(t))return!0;if(!t)return!1;throw Error("formatterName must be a function or a falsy value")}function y(t){return e.isFunction(t)?t():t}function F(t){var s=0;return e.each(t,function(e,t){t.children?s+=F(t.children):s++}),s}function x(e,s,n,a){var r,o,l,c,h,d=e,u=!1;if(!a.createSearchChoice||!a.tokenSeparators||1>a.tokenSeparators.length)return t;for(;;){for(o=-1,l=0,c=a.tokenSeparators.length;c>l&&(h=a.tokenSeparators[l],o=e.indexOf(h),!(o>=0));l++);if(0>o)break;if(r=e.substring(0,o),e=e.substring(o+h.length),r.length>0&&(r=a.createSearchChoice(r,s),r!==t&&null!==r&&a.id(r)!==t&&null!==a.id(r))){for(u=!1,l=0,c=s.length;c>l;l++)if(i(a.id(r),a.id(s[l]))){u=!0;break}u||n(r)}}return d!==e?e:t}function S(t,s){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,s),i}if(window.Select2===t){var k,$,E,D,T,I,_,P;k={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case k.LEFT:case k.RIGHT:case k.UP:case k.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case k.SHIFT:case k.CTRL:case k.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},P=e(document),T=function(){var e=1;return function(){return e++}}(),P.bind("mousemove",function(e){_={x:e.pageX,y:e.pageY}}),$=S(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(s){var i,n,a=".select2-results";this.opts=s=this.prepareOpts(s),this.id=s.id,s.element.data("select2")!==t&&null!==s.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(s.element.attr("id")||"autogen"+T()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=c(function(){return s.element.closest("body")}),m(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(y(s.containerCss)),this.container.addClass(y(s.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabIndex"),this.opts.element.data("select2",this).addClass("select2-offscreen").bind("focus.select2",function(){e(this).select2("focus")}).attr("tabIndex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(y(s.dropdownCssClass)),this.dropdown.data("select2",this),this.results=i=this.container.find(a),this.search=n=this.container.find("input.select2-input"),n.attr("tabIndex",this.elementTabIndex),this.resultsPage=0,this.context=null,this.initContainer(),o(this.results),this.dropdown.delegate(a,"mousemove-filtered touchstart touchmove touchend",this.bind(this.highlightUnderEvent)),h(80,this.results),this.dropdown.delegate(a,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),e.fn.mousewheel&&i.mousewheel(function(e,t,s,n){var a=i.scrollTop();n>0&&0>=a-n?(i.scrollTop(0),u(e)):0>n&&i.get(0).scrollHeight-i.scrollTop()+n<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),u(e))}),r(n),n.bind("keyup-change input paste",this.bind(this.updateResults)),n.bind("focus",function(){n.addClass("select2-focused")}),n.bind("blur",function(){n.removeClass("select2-focused")}),this.dropdown.delegate(a,"mouseup",this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(s.element.is(":disabled")||s.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeClass("select2-offscreen").removeData("select2").unbind(".select2").attr({tabIndex:this.elementTabIndex}).show())},prepareOpts:function(s){var a,r,o,l;if(a=s.element,"select"===a.get(0).tagName.toLowerCase()&&(this.select=r=s.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in s)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),s=e.extend({},{populateResults:function(i,n,a){var r,o=this.opts.id,l=this;r=function(i,n,c){var h,d,u,f,p,m,g,v,b,C;for(i=s.sortResults(i,n,a),h=0,d=i.length;d>h;h+=1)u=i[h],p=u.disabled===!0,f=!p&&o(u)!==t,m=u.children&&u.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+c),g.addClass("select2-result"),g.addClass(f?"select2-result-selectable":"select2-result-unselectable"),p&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(l.opts.formatResultCssClass(u)),v=e(document.createElement("div")),v.addClass("select2-result-label"),C=s.formatResult(u,v,a,l.opts.escapeMarkup),C!==t&&v.html(C),g.append(v),m&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),r(u.children,b,c+1),g.append(b)),g.data("select2-data",u),n.append(g)},r(n,i,0)}},e.fn.select2.defaults,s),"function"!=typeof s.id&&(o=s.id,s.id=function(e){return e[o]}),e.isArray(s.element.data("select2Tags"))){if("tags"in s)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+s.element.attr("id");s.tags=s.element.data("select2Tags")}if(r?(s.query=this.bind(function(s){var n,r,o,l={results:[],more:!1},c=s.term;o=function(e,t){var n;e.is("option")?s.matcher(c,e.text(),e)&&t.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:i(e.attr("disabled"),"disabled")}):e.is("optgroup")&&(n={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")},e.children().each2(function(e,t){o(t,n.children)}),n.children.length>0&&t.push(n))},n=a.children(),this.getPlaceholder()!==t&&n.length>0&&(r=n[0],""===e(r).text()&&(n=n.not(r))),n.each2(function(e,t){o(t,l.results)}),s.callback(l)}),s.id=function(e){return e.id},s.formatResultCssClass=function(e){return e.css}):"query"in s||("ajax"in s?(l=s.element.data("ajax-url"),l&&l.length>0&&(s.ajax.url=l),s.query=v.call(s.element,s.ajax)):"data"in s?s.query=b(s.data):"tags"in s&&(s.query=C(s.tags),s.createSearchChoice===t&&(s.createSearchChoice=function(e){return{id:e,text:e}}),s.initSelection===t&&(s.initSelection=function(a,r){var o=[];e(n(a.val(),s.separator)).each(function(){var n=this,a=this,r=s.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){return i(this.id,n)?(a=this.text,!1):t}),o.push({id:n,text:a})}),r(o)}))),"function"!=typeof s.query)throw"query function not defined for Select2 "+s.element.attr("id");return s},monitorSource:function(){var e,t=this.opts.element;t.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,t;e="disabled"!==this.opts.element.attr("disabled"),t="readonly"===this.opts.element.attr("readonly"),e=e&&!t,this.enabled!==e&&(e?this.enable():this.disable()),m(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(y(this.opts.containerCssClass)),m(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(y(this.opts.dropdownCssClass))}),t.bind("propertychange.select2 DOMAttrModified.select2",e),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(function(t){t.forEach(e)}),this.propertyObserver.observe(t.get(0),{attributes:!0,subtree:!1}))},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,s,i,n=this.container.offset(),a=this.container.outerHeight(!1),r=this.container.outerWidth(!1),o=this.dropdown.outerHeight(!1),l=e(window).scrollLeft()+e(window).width(),c=e(window).scrollTop()+e(window).height(),h=n.top+a,d=n.left,u=c>=h+o,f=n.top-o>=this.body().scrollTop(),p=this.dropdown.outerWidth(!1),m=l>=d+p,g=this.dropdown.hasClass("select2-drop-above");"static"!==this.body().css("position")&&(t=this.body().offset(),h-=t.top,d-=t.left),g?(s=!0,!f&&u&&(s=!1)):(s=!1,!u&&f&&(s=!0)),m||(d=n.left+r-p),s?(h=n.top-o,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),i=e.extend({top:h,left:d,width:r},y(this.opts.dropdownCss)),this.dropdown.css(i)},shouldOpen:function(){var t;return this.opened()?!1:(t=e.Event("opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var s,i=this.containerId,n="scroll."+i,a="resize."+i,r="orientationchange."+i;this.clearDropdownAlignmentPreference(),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.updateResults(!0),s=e("#select2-drop-mask"),0==s.length&&(s=e(document.createElement("div")),s.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),s.hide(),s.appendTo(this.body()),s.bind("mousedown touchstart",function(){var t,s=e("#select2-drop");s.length>0&&(t=s.data("select2"),t.opts.selectOnBlur&&t.selectHighlighted({noFocus:!0}),t.close())})),this.dropdown.prev()[0]!==s[0]&&this.dropdown.before(s),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),s.css(t()),s.show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible();var o=this;this.container.parents().add(window).each(function(){e(this).bind(a+" "+n+" "+r,function(){e("#select2-drop-mask").css(t()),o.positionDropdown()})}),this.focusSearch()},close:function(){if(this.opened()){var t=this.containerId,s="scroll."+t,i="resize."+t,n="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).unbind(s).unbind(i).unbind(n)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},getMaximumSelectionSize:function(){return y(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var s,i,n,a,r,o,l,c=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return c.scrollTop(0),t;s=this.findHighlightableChoices(),n=e(s[i]),a=n.offset().top+n.outerHeight(!0),i===s.length-1&&(l=c.find("li.select2-more-results"),l.length>0&&(a=l.offset().top+l.outerHeight(!0))),r=c.offset().top+c.outerHeight(!0),a>r&&c.scrollTop(c.scrollTop()+(a-r)),o=n.offset().top-c.offset().top,0>o&&"none"!=n.css("display")&&c.scrollTop(c.scrollTop()+o)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)"),this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){for(var s=this.findHighlightableChoices(),i=this.highlight();i>-1&&s.length>i;){i+=t;var n=e(s[i]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(i){var n,a,r=this.findHighlightableChoices();return 0===arguments.length?s(r.filter(".select2-highlighted")[0],r.get()):(i>=r.length&&(i=r.length-1),0>i&&(i=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),n=e(r[i]),n.addClass("select2-highlighted"),this.ensureHighlightVisible(),a=n.data("select2-data"),a&&this.opts.element.trigger({type:"highlight",val:this.id(a),choice:a}),t)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var s=e(t.target).closest(".select2-result-selectable");if(s.length>0&&!s.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(s))}else 0==s.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,s=t.find("li.select2-more-results"),i=this.resultsPage+1,n=this,a=this.search.val(),r=this.context;0!==s.length&&(e=s.offset().top-t.offset().top-t.height(),this.opts.loadMorePadding>=e&&(s.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:i,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){n.opened()&&(n.opts.populateResults.call(this,t,e.results,{term:a,page:i,context:r}),n.postprocessResults(e,!1,!1),e.more===!0?(s.detach().appendTo(t).text(n.opts.formatLoadMore(i+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):s.remove(),n.positionDropdown(),n.resultsPage=i,n.context=e.context)})})))},tokenize:function(){},updateResults:function(s){function n(){c.scrollTop(0),l.removeClass("select2-active"),d.positionDropdown()}function a(e){c.html(e),n()}var r,o,l=this.search,c=this.results,h=this.opts,d=this,u=l.val(),f=e.data(this.container,"select2-last-term");if((s===!0||!f||!i(u,f))&&(e.data(this.container,"select2-last-term",u),s===!0||this.showSearchInput!==!1&&this.opened())){var p=this.getMaximumSelectionSize();if(p>=1&&(r=this.data(),e.isArray(r)&&r.length>=p&&w(h.formatSelectionTooBig,"formatSelectionTooBig")))return a("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(p)+"</li>"),t;if(l.val().length<h.minimumInputLength)return w(h.formatInputTooShort,"formatInputTooShort")?a("<li class='select2-no-results'>"+h.formatInputTooShort(l.val(),h.minimumInputLength)+"</li>"):a(""),t;if(h.maximumInputLength&&l.val().length>h.maximumInputLength)return w(h.formatInputTooLong,"formatInputTooLong")?a("<li class='select2-no-results'>"+h.formatInputTooLong(l.val(),h.maximumInputLength)+"</li>"):a(""),t;h.formatSearching&&0===this.findHighlightableChoices().length&&a("<li class='select2-searching'>"+h.formatSearching()+"</li>"),l.addClass("select2-active"),o=this.tokenize(),o!=t&&null!=o&&l.val(o),this.resultsPage=1,h.query({element:h.element,term:l.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(r){var o;return this.opened()?(this.context=r.context===t?null:r.context,this.opts.createSearchChoice&&""!==l.val()&&(o=this.opts.createSearchChoice.call(null,l.val(),r.results),o!==t&&null!==o&&d.id(o)!==t&&null!==d.id(o)&&0===e(r.results).filter(function(){return i(d.id(this),d.id(o))}).length&&r.results.unshift(o)),0===r.results.length&&w(h.formatNoMatches,"formatNoMatches")?(a("<li class='select2-no-results'>"+h.formatNoMatches(l.val())+"</li>"),t):(c.empty(),d.opts.populateResults.call(this,c,r.results,{term:l.val(),page:this.resultsPage,context:null}),r.more===!0&&w(h.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+d.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){d.loadMoreIfNeeded()
},10)),this.postprocessResults(r,s),n(),this.opts.element.trigger({type:"loaded",data:r}),t)):(this.search.removeClass("select2-active"),t)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){d(this.search)},selectHighlighted:function(e){var t=this.highlight(),s=this.results.find(".select2-highlighted"),i=s.closest(".select2-result").data("select2-data");i&&(this.highlight(t),this.onSelect(i,e))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function s(){var s,i,n,a,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(s=this.opts.element.attr("style"),s!==t)for(i=s.split(";"),a=0,r=i.length;r>a;a+=1)if(n=i[a].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==n&&n.length>=1)return n[1];return"resolve"===this.opts.width?(s=this.opts.element.css("width"),s.indexOf("%")>0?s:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=s.call(this);null!==i&&this.container.css("width",i)}}),E=S($,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop' style='display:none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.focusser.attr("disabled","disabled"))},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.focusser.removeAttr("disabled"))},opening:function(){this.parent.opening.apply(this,arguments),this.focusser.attr("disabled","disabled"),this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),d(this.focusser))},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var s,i=this.container,n=this.dropdown,a=!1;this.showSearch(this.opts.minimumResultsForSearch>=0),this.selection=s=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+T()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===k.PAGE_UP||e.which===k.PAGE_DOWN)return u(e),t;switch(e.which){case k.UP:case k.DOWN:return this.moveHighlight(e.which===k.UP?-1:1),u(e),t;case k.TAB:case k.ENTER:return this.selectHighlighted(),u(e),t;case k.ESC:return this.cancel(e),u(e),t}}})),this.search.bind("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.bind("keydown",this.bind(function(e){return!this.enabled||e.which===k.TAB||k.isControl(e)||k.isFunctionKey(e)||e.which===k.ESC?t:this.opts.openOnEnter===!1&&e.which===k.ENTER?(u(e),t):e.which==k.DOWN||e.which==k.UP||e.which==k.ENTER&&this.opts.openOnEnter?(this.open(),u(e),t):e.which==k.DELETE||e.which==k.BACKSPACE?(this.opts.allowClear&&this.clear(),u(e),t):t})),r(this.focusser),this.focusser.bind("keyup-change input",this.bind(function(e){this.opened()||(this.open(),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.focusser.val(""),u(e))})),s.delegate("abbr","mousedown",this.bind(function(e){this.enabled&&(this.clear(),f(e),this.close(),this.selection.focus())})),s.bind("mousedown",this.bind(function(e){a=!0,this.opened()?this.close():this.enabled&&this.open(),u(e),a=!1})),n.bind("mousedown",this.bind(function(){this.search.focus()})),s.bind("focus",this.bind(function(e){u(e)})),this.focusser.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})).bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active")})),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");t&&(this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t})))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(t,s){var i=t.find(":selected");e.isFunction(s)&&s({id:i.attr("value"),text:i.text(),element:i})}:"data"in t&&(t.initSelection=t.initSelection||function(s,n){var a=s.val(),r=null;t.query({matcher:function(e,s,n){var o=i(a,t.id(n));return o&&(r=n),o},callback:e.isFunction(n)?function(){n(r)}:e.noop})}),t},getPlaceholder:function(){return this.select&&""!==this.select.find("option").first().text()?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(""===this.opts.element.val()&&e!==t){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(e,s,n){var a=0,r=this,o=!0;if(this.findHighlightableChoices().each2(function(e,s){return i(r.id(s.data("select2-data")),r.opts.element.val())?(a=e,!1):t}),n!==!1&&this.highlight(a),s===!0){var l=this.opts.minimumResultsForSearch;o=0>l?!1:F(e.results)>=l,this.showSearch(o)}},showSearch:function(t){this.showSearchInput=t,this.dropdown.find(".select2-search")[t?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[t?"addClass":"removeClass"]("select2-with-searchbox")},onSelect:function(e,t){var s=this.opts.element.val();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),i(s,this.id(e))||this.triggerChange()},updateSelection:function(e){var s,i=this.selection.find("span");this.selection.data("select2-data",e),i.empty(),s=this.opts.formatSelection(e,i),s!==t&&i.append(this.opts.escapeMarkup(s)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()},val:function(){var e,s=!1,i=null,n=this;if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(s=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return i={id:t.attr("value"),text:t.text(),element:t.get(0)},!1}),this.updateSelection(i),this.setPlaceholder(),s&&this.triggerChange();else{if(this.opts.initSelection===t)throw Error("cannot call val() if initSelection() is not defined");if(!e&&0!==e)return this.clear(s),s&&this.triggerChange(),t;this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(e?n.id(e):""),n.updateSelection(e),n.setPlaceholder(),s&&n.triggerChange()})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var s;return 0===arguments.length?(s=this.selection.data("select2-data"),s==t&&(s=null),s):(e&&""!==e?(this.opts.element.val(e?this.id(e):""),this.updateSelection(e)):this.clear(),t)}}),D=S($,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var s=[];e.find(":selected").each2(function(e,t){s.push({id:t.attr("value"),text:t.text(),element:t[0]})}),t(s)}:"data"in t&&(t.initSelection=t.initSelection||function(s,a){var r=n(s.val(),t.separator),o=[];t.query({matcher:function(s,n,a){var l=e.grep(r,function(e){return i(e,t.id(a))}).length;return l&&o.push(a),l},callback:e.isFunction(a)?function(){a(o)}:e.noop})}),t},initContainer:function(){var s,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=s=this.container.find(i),this.search.attr("id","s2id_autogen"+T()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.bind("input paste",this.bind(function(){this.enabled&&(this.opened()||this.open())})),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===k.BACKSPACE&&""===this.search.val()){this.close();var i,n=s.find(".select2-search-choice-focus");if(n.length>0)return this.unselect(n.first()),this.search.width(10),u(e),t;i=s.find(".select2-search-choice:not(.select2-locked)"),i.length>0&&i.last().addClass("select2-search-choice-focus")}else s.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case k.UP:case k.DOWN:return this.moveHighlight(e.which===k.UP?-1:1),u(e),t;case k.ENTER:case k.TAB:return this.selectHighlighted(),u(e),t;case k.ESC:return this.cancel(e),u(e),t}if(e.which!==k.TAB&&!k.isControl(e)&&!k.isFunctionKey(e)&&e.which!==k.BACKSPACE&&e.which!==k.ESC){if(e.which===k.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===k.PAGE_UP||e.which===k.PAGE_DOWN)&&u(e),e.which===k.ENTER&&u(e)}}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.opened()||this.clearSearch(),e.stopImmediatePropagation()})),this.container.delegate(i,"mousedown",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.delegate(i,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(s){s!==t&&null!==s&&(e.updateSelection(s),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(this.getMaxSearchWidth())):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.opts.element.trigger(e.Event("open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],n=[],a=this;e(t).each(function(){0>s(a.id(this),i)&&(i.push(a.id(this)),n.push(this))}),t=n,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(s){var i,n=!s.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=e("<li class='select2-search-choice select2-locked'><div></div></li>"),o=n?a:r,l=this.id(s),c=this.getVal();i=this.opts.formatSelection(s,o.find("div")),i!=t&&o.find("div").replaceWith("<div>"+this.opts.escapeMarkup(i)+"</div>"),n&&o.find(".select2-search-choice-close").bind("mousedown",u).bind("click dblclick",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),u(t))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),o.data("select2-data",s),o.insertBefore(this.searchContainer),c.push(l),this.setVal(c)},unselect:function(e){var t,i,n=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(i=s(this.id(t),n),i>=0&&(n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(){var e=this.getVal(),t=this.results.find(".select2-result"),i=this.results.find(".select2-result-with-children"),n=this;t.each2(function(t,i){var a=n.id(i.data("select2-data"));s(a,e)>=0&&(i.addClass("select2-selected"),i.find(".select2-result-selectable").addClass("select2-selected"))}),i.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n.highlight(0)},getMaxSearchWidth:function(){return this.selection.width()-a(this.search)},resizeSearch:function(){var e,t,s,i,n,r=a(this.search);e=p(this.search)+10,t=this.search.offset().left,s=this.selection.width(),i=this.selection.offset().left,n=s-(t-i)-r,e>n&&(n=s-r),40>n&&(n=s-r),0>=n&&(n=e),this.search.width(n)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),n(e,this.opts.separator))},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){0>s(this,i)&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},val:function(){var s,i=!1,n=this;if(0===arguments.length)return this.getVal();if(s=arguments[0],arguments.length>1&&(i=arguments[1]),!s&&0!==s)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),i&&this.triggerChange(),t;if(this.setVal(s),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange();else{if(this.opts.initSelection===t)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var s=e(t).map(n.id);n.setVal(s),n.updateSelection(t),n.clearSearch(),i&&n.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],s=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(s.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(s){var i,n=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(s||(s=[]),i=e.map(s,function(e){return n.opts.id(e)}),this.setVal(i),this.updateSelection(s),this.clearSearch(),t)}}),e.fn.select2=function(){var i,n,a,r,o=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===o.length||"object"==typeof o[0])i=0===o.length?{}:e.extend({},o[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?r=i.element.attr("multiple"):(r=i.multiple||!1,"tags"in i&&(i.multiple=r=!0)),n=r?new D:new E,n.init(i);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(0>s(o[0],l))throw"Unknown method: "+o[0];if(a=t,n=e(this).data("select2"),n===t)return;if(a="container"===o[0]?n.container:n[o[0]].apply(n,o.slice(1)),a!==t)return!1}}),a===t?this:a},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,s,i){var n=[];return g(e.text,s.term,n,i),n.join("")},formatSelection:function(e){return e?e.text:t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var s=t-e.length;return"Please enter "+s+" more character"+(1==s?"":"s")},formatInputTooLong:function(e,t){var s=e.length-t;return"Please delete "+s+" character"+(1==s?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:x,escapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return(e+"").replace(/[&<>"'\/\\]/g,function(e){return t[e[0]]})},blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},window.Select2={query:{ajax:v,local:b,tags:C},util:{debounce:l,markMatch:g},"class":{"abstract":$,single:E,multi:D}}}}(jQuery),$(document).ready(function(){function e(){$("#g-search-dropdown-wrapper").slideDown(function(){$(this).addClass("s-expanded")})}function t(){var e=$("#g-search-input");$("#g-search-dropdown-wrapper").removeClass("s-expanded").slideUp(function(){$("#g-search").removeClass("s-active"),e.blur(),e.unbind("keyup")})}function s(e){var t=""==$(e).val()?!1:!0;return t}function i(e,t,s){$.post(e,t,function(e){"function"==typeof s.complete&&s.complete(e)})}$("#g-search-input").live("focus",function(){var n,a=$(this).parent("#g-search"),r=$(this),o=$(this).siblings("#g-search-cancel"),l=$(this).siblings("#g-search-loading"),c=$("#g-search-dropdown"),h=!0;a.addClass("s-active").hover(function(){h=!0},function(){h=!1}),s(this)&&e(),r.keyup(function(h){var d=!1;return void 0!=n&&clearTimeout(n),27==h.keyCode?(t(),void 0):(d||e(),window.ga_search_val="",n=setTimeout(function(){l.fadeIn("fast"),i("/ajax/search-results",a.serialize(),{complete:function(e){l.fadeOut("fast"),c.hide().html(e).show(),ga_search_val!=r.val()&&_gaq.push(["_trackPageview","/virt/search?q="+encodeURI(r.val())]),ga_search_val=r.val()}})},200),s(this)?o.fadeIn():o.fadeOut(),void 0)}),$("body").bind("click",function(){h||(t(),$("body").unbind("click"))}),o.click(function(e){e.preventDefault(),r.val("").keyup(),$(this).fadeOut()})}),$(".results-view-more-link").live("click",function(e){e.preventDefault(),$("#g-search-submit").trigger("click")}),$(".search-ajax-filter").live("click",function(){$("#g-search").attr("action",$(this).data("filterurl")),$("#g-search-submit").trigger("click")})}),$(function(){function e(e){var s,i=!1;s=e instanceof jQuery?e:$(e),s.hover(function(){i=!0},function(){i=!1}),$(document).on("click","body",function(){i||(t(),$(document).off("keypress","body"))}),$(document).on("keyup",function(e){27===e.keyCode&&(t(),$(document).off("keypress"))})}function t(){$("body").removeClass("masked"),$(".modal-mask, #login-modal, #email-modal, #special-audience-modal").hide(),$("#login-modal .modal-content .modal-headline").html("Please log in to access this content")}function s(){$(this).addClass("s-hover").addClass("s-visible"),c=!0,$(this).find(".dropdown").stop(!0,!0).slideDown(300,function(){c=!1,$(this).removeClass("s-initial")})}function i(){var e=$(this);$(this).removeClass("s-hover"),$(this).find(".dropdown").stop(!0,!0).slideUp(200,function(){c||e.removeClass("s-visible")})}function n(e){var t=""!==e?e:"#fund-overview";$(".fund-tab").hide(),$(t).fadeIn(),$(".fund-tab-link").closest("li").removeClass("s-active"),$("a[href='"+t+"']").closest("li").addClass("s-active"),$(t).hasClass("fund-tab-no-sidebar")?$(".sidebar-shifted-left").hide():$(".sidebar-shifted-left").show()}function a(e){var t=""!==e?e:"#client-materials";$(".fund-tab").hide(),$(t).fadeIn(),$(".fund-tab-link").closest("li").removeClass("s-active"),$("a[href='"+t+"']").closest("li").addClass("s-active"),$(t).hasClass("fund-tab-no-sidebar")?$(".sidebar-shifted-left").hide():$(".sidebar-shifted-left").show()}function r(){$("#article-footer").animate({opacity:1},{easing:"linear",duration:"fast"})}function o(){$("#article-footer").animate({opacity:0},{easing:"linear",duration:"fast"})}$("h1, h2, h3, .sidebar-data, .article-summary-title, .result-title, .article-summary-title").ieffembedfix(),$(".modal-hide, .login-modal-hide, .email-modal-hide").click(function(e){$("body").removeClass("masked"),$(".modal-mask, #login-modal, #email-modal, #special-audience-modal").hide(),$("#login-modal .modal-content .modal-headline").html("Please log in to access this content"),e.preventDefault()}),$(".login-modal-show").click(function(t){t.stopPropagation(),t.preventDefault(),$("body").addClass("masked"),$(".modal-mask, #login-modal").show(),$(this).hasClass("default-login")&&$("#login-modal .modal-content .modal-headline").html("Log In or Register"),e("#login-modal")}),$(".audience-modal-show").click(function(t){t.stopPropagation(),t.preventDefault(),$("body").addClass("masked"),$(".modal-mask, #audience-modal").show(),e("#audience-modal")}),$(".special-audience-modal-show").click(function(t){t.stopPropagation(),t.preventDefault(),$("body").addClass("masked"),$(".modal-mask, #special-audience-modal").show(),e("#special-audience-modal")}),$(".email-modal-show").click(function(t){t.stopPropagation(),t.preventDefault(),$("body").addClass("masked"),$(".modal-mask, #email-modal").show(),e("#email-modal")}),$(document).on("click",".m-slideshow-sidebar-link",function(e){function t(){i.removeClass("s-active"),l.fadeOut("fast"),$(document).off(".slideshow"),n.off(".slideshow")}function s(e){return $(e).closest(".js-investor-overlay").find(".js-investor-overlay-desc").find("div").filter(function(){return 0==$(this).find("p").length?!1:$(this).attr("data-id")===$(e).attr("data-id")})}e.preventDefault();var i=$(this),n=i.closest(".wrapper"),a=$(this).attr("data-us"),r=$(this).attr("data-nonus"),o=$(this).attr("data-audience-text"),l=$(".m-investor-overlay"),c=!1;i.hasClass("s-active")?t():($(".m-slideshow-sidebar-link").removeClass("s-active"),i.addClass("s-active"),l.find(".js-investor-overlay-link .js-audience-text").html(o),l.find(".js-investor-overlay-link.audience-us").attr("data-id",a),l.find(".js-investor-overlay-link.audience-nonus").attr("data-id",r),_gaq.push(["_trackEvent","AudienceSelection",o]),l.is(":visible")||l.fadeIn("fast")),$(document).on("keyup.slideshow",function(e){27==e.keyCode&&t()}),n.on("mouseover.slideshow",function(){c=!0}).on("mouseleave.slideshow",function(){c=!1}),$(document).on("click.slideshow",function(){c||t()}),$(".js-investor-overlay-link").on("mouseenter.slideshow",function(){s(this).fadeIn()}).on("mouseleave.slideshow",function(){s(this).fadeOut()}).on("click",function(e){e.preventDefault(),_gaq.push(["_trackEvent","AudienceSelection",$(this).find(".js-audience-text").html()+" - "+$(this).find("em").html()+" US"]),$("#audience_set_form .audience_id").val($(this).attr("data-id")),$("#audience_set_form").submit()})}),$("li.japan a").on("mouseenter",function(){var e=$(this).parent("li").find(".link-tip");e.addClass("has-focus"),setTimeout(function(){e.hasClass("has-focus")&&e.fadeIn()},1e3)}).on("mouseleave.slideshow",function(){$(this).parent("li").find(".link-tip").removeClass("has-focus"),$(this).parent("li").find(".link-tip").fadeOut()}),$(".toggle").toggler(),$(".fund-lit-add-toggle").toggler({animation:"toggle",delay:0,toggleName:".fund-lit-add-toggle",clickOff:!0}),$(".fund-lit-add-modal").delegate(".fund-lit-add-print","click",function(e){e.preventDefault();var t=$(this).closest(".fund-lit-add-modal"),s=t.contents("ul"),i=s.height(),n=s.width(),a=$(this).closest("form").find('input[name="checkout_page"]').val();$.post($(this).closest("form").attr("action"),$(this).closest("form").serialize(),function(e){e.status===!0&&($("#lit_order_count").html("My Open Orders ("+e.count+")"),t.css({height:i,width:n}),s.fadeOut("fast",function(){t.parent(".fund-lit-add-toggle").addClass("s-added"),t.prepend('<div class="modal-new-content" style="display: none;"><p>Added.<br/>You may checkout at any time from your account in the top menu.</p><a href="'+a+'"><span>Checkout now</span><span class="icon icon-rtriangle-tiny-blue"></span></a></div>');var e=t.find(".modal-new-content"),s=e.height(),i=e.width();t.animate({height:s,width:i},{easing:"swing",duration:"400",complete:function(){t.find(".modal-new-content").fadeIn()}})}))},"json")}),$(".fund-lit-remove").click(function(e){e.preventDefault(),$("#fund-lit-remove-form #remove_entry_id").val($(this).data("entryid")),$("#fund-lit-remove-form #remove_item").val($(this).data("item")),$("#fund-lit-remove-form").submit()}),$(".dropdown-trigger-first").click(function(e){e.preventDefault()});var l={sensitivity:3,interval:50,over:s,timeout:500,timeoutIsOpen:10,out:i},c=!1;$(".has-dropdown").hoverIntent(l),$("#m-slides").slides({container:"m-slides-wrapper",play:5500,slideSpeed:650,effect:"fade",paginationClass:"m-slideshow-pagination"}),$(document).on("click",".audience-option",function(){$(this).closest("#select-user").addClass("s-active")}),$(".ui-submit").click(function(e){e.preventDefault(),$(this).closest("form").submit()}),$(".select-choose").uniform({selectClass:"select-wrapper-choose",useID:!1}),$(".select-quantity").uniform({selectClass:"select-wrapper-quantity",useID:!1}),$(".select-pct").uniform({selectClass:"select-wrapper-pct align-outside-right align-top align-bottom",useID:!1}),$("#email-message").charCount({css:"input-subtext",allowed:300,counterText:" characters remaining",counterElement:"p",counterTextAfter:!0}),$("#email-message-submit").click(function(e){e.preventDefault();var t=$(this).closest("form");t.hasClass("submit-disabled")||t.submit()}),$("#share-by-email").submit(function(e){e.preventDefault(),$.post($(this).attr("action"),$(this).serialize(),function(e){e.success?($("#recipient_email, #email-message").val(""),$("#share-by-email").find(".error").html(""),$("#email-modal #share-by-email").hide().delay(2e3).fadeIn(),$("#email-modal .success-message").html("You have successfully shared this page!").show().delay(2e3).fadeOut()):$("#share-by-email").find(".error").html("Please ensure that all fields have been completed.")},"json")}),$("input, textarea").placeholder(),jQuery.validator.messages.required="*",$("#lit_checkout_form").validate({invalidHandler:function(e,t){var s=t.numberOfInvalids();if(s){var i=1===s?"You missed 1 field. It is marked below with an *":"You missed "+s+" fields.  They have been marked below with an *";$("#lit_checkout-form-error").html(i),$("#lit_checkout-form-error").show()}else $("#lit_checkout-form-error").hide()}}),$("#register_form").validate({invalidHandler:function(e,t){var s=t.numberOfInvalids();if(s){var i=1===s?"You missed 1 field. It is marked with an *":"You missed "+s+" fields.  They are marked with an *";$("#register-form-error").html(i),$("#register-form-error").show()}else $("#register-form-error").hide()},groups:{passwordGroup:"password password_comfirm"},rules:{username:{email:!0},password_confirm:{minlength:8,equalTo:"#password"},zip_code:{minlength:5}},messages:{username:"Please enter a valid email address",password_confirm:{required:"Your password must be at least 8 digits",minlength:"Your password must be at least 8 digits",equalTo:"Your passwords do not match"},zip_code:{required:"Your zip code must be at least 5 digits",minlength:"Your zip code must be at least 5 digits"}}}),$("#register_for_account").click(function(){$(this).is(":checked")?($(".section-form.register-additional").slideDown(),$(".submit-wrapper input[type='submit']").attr("value","Register")):($(".section-form.register-additional").slideUp(),$(".submit-wrapper input[type='submit']").attr("value","Finish"))}),$(".audience-option").click(function(e){$(".select-user-confirm").hide(),$(".audience-option").removeClass("s-active"),$(this).addClass("s-active"),$("#"+$(this).data("audience")+"-confirm").fadeIn(),e.preventDefault()}),$(".change-audience-type").click(function(e){$("#audience_reset_form").submit(),e.preventDefault()}),$("#register_for_account_brochure").click(function(){$(this).is(":checked")?$("#brochure_register_account").slideDown():$("#brochure_register_account").slideUp()}),document.URL.indexOf("funds/details")>0&&n(window.location.hash),document.URL.indexOf("merrill-lynch")>0&&a(window.location.hash),$(".fund-tab-link").click(function(e){e.preventDefault(),window.location.hash="#fund-overview"===this.hash?"":this.hash,n(this.hash)}),$(".sticky").sticky({delay:30,anchored:!0,anchoredTo:function(){return $("#article-footer").length>0?"#article-footer":"#g-footer"
}(),fromTop:15,anchorVisible:function(){$(".insight").length&&$("#article-footer").length>0&&$(this).animate({opacity:0},{easing:"linear",duration:"fast",complete:r})},anchorInvisible:function(){$(".insight").length&&$("#article-footer").length>0&&$(this).animate({opacity:1},{easing:"linear",duration:"fast",complete:o})}}),String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.fullTrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},$('a[href$="pdf"]:not([target])').attr("target","_blank"),$('a[href$="pdf"]').not(".fund-lit-add").click(function(){var e=$(this).attr("href");return _gaq.push(["_trackEvent","PDF","Download",e]),void 0!=$(this).attr("target")&&"_blank"!=$(this).attr("target").toLowerCase()?(setTimeout(function(){location.href=e},200),!1):void 0}),$("#calendar_year_select").change(function(){window.location=$(this).val()}),$(".cal-options").select2({placeholder:"Add event filters ...",allowClear:!0,formatResult:function(e){return void 0!==$(e.element).data("img")?'<img src="'+$(e.element).data("img")+'"/> '+e.text:void 0!==$(e.element).data("append-display")?e.text+$(e.element).data("append-display"):e.text}})}),function(e,t){function s(e,t){var s=e.createElement("p"),i=e.getElementsByTagName("head")[0]||e.documentElement;return s.innerHTML="x<style>"+t+"</style>",i.insertBefore(s.lastChild,i.firstChild)}function i(){var e=F.elements;return"string"==typeof e?e.split(" "):e}function n(e){var t=y[e[C]];return t||(t={},w++,e[C]=w,y[w]=t),t}function a(e,s,i){if(s||(s=t),m)return s.createElement(e);i=i||n(s);var a;return a=i.cache[e]?i.cache[e].cloneNode():b.test(e)?(i.cache[e]=i.createElem(e)).cloneNode():i.createElem(e),a.canHaveChildren&&!v.test(e)?i.frag.appendChild(a):a}function r(e,s){if(e||(e=t),m)return e.createDocumentFragment();s=s||n(e);for(var a=s.frag.cloneNode(),r=0,o=i(),l=o.length;l>r;r++)a.createElement(o[r]);return a}function o(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(e){return F.shivMethods?a(e):t.createElem(e)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(F,t.frag)}function l(e){e||(e=t);var i=n(e);return!F.shivCSS||p||i.hasCSS||(i.hasCSS=!!s(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),m||o(e,i),e}function c(e){for(var t,s=e.getElementsByTagName("*"),n=s.length,a=RegExp("^(?:"+i().join("|")+")$","i"),r=[];n--;)t=s[n],a.test(t.nodeName)&&r.push(t.applyElement(h(t)));return r}function h(e){for(var t,s=e.attributes,i=s.length,n=e.ownerDocument.createElement(S+":"+e.nodeName);i--;)t=s[i],t.specified&&n.setAttribute(t.nodeName,t.nodeValue);return n.style.cssText=e.style.cssText,n}function d(e){for(var t,s=e.split("{"),n=s.length,a=RegExp("(^|[\\s,>+~])("+i().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),r="$1"+S+"\\:$2";n--;)t=s[n]=s[n].split("}"),t[t.length-1]=t[t.length-1].replace(a,r),s[n]=t.join("}");return s.join("{")}function u(e){for(var t=e.length;t--;)e[t].removeNode()}function f(e){var t,i,n=e.namespaces,a=e.parentWindow;return!k||e.printShived?e:("undefined"==typeof n[S]&&n.add(S),a.attachEvent("onbeforeprint",function(){for(var n,a,r,o=e.styleSheets,l=[],h=o.length,u=Array(h);h--;)u[h]=o[h];for(;r=u.pop();)if(!r.disabled&&x.test(r.media)){try{n=r.imports,a=n.length}catch(f){a=0}for(h=0;a>h;h++)u.push(n[h]);try{l.push(r.cssText)}catch(f){}}l=d(l.reverse().join("")),i=c(e),t=s(e,l)}),a.attachEvent("onafterprint",function(){u(i),t.removeNode(!0)}),e.printShived=!0,e)}var p,m,g=e.html5||{},v=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,b=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,C="_html5shiv",w=0,y={};!function(){var e=t.createElement("a");e.innerHTML="<xyz></xyz>",p="hidden"in e,m=1==e.childNodes.length||function(){try{t.createElement("a")}catch(e){return!0}var s=t.createDocumentFragment();return"undefined"==typeof s.cloneNode||"undefined"==typeof s.createDocumentFragment||"undefined"==typeof s.createElement}()}();var F={elements:g.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:!(g.shivCSS===!1),supportsUnknownElements:m,shivMethods:!(g.shivMethods===!1),type:"default",shivDocument:l,createElement:a,createDocumentFragment:r};e.html5=F,l(t);var x=/^$|\b(?:all|print)\b/,S="html5shiv",k=!m&&function(){var s=t.documentElement;return!("undefined"==typeof t.namespaces||"undefined"==typeof t.parentWindow||"undefined"==typeof s.applyElement||"undefined"==typeof s.removeNode||"undefined"==typeof e.attachEvent)}();F.type+=" print",F.shivPrint=f,f(t)}(this,document),$(function(){function e(e,t,s,i,n,a){_gaq.push([t,s,i,n,a]),window.setTimeout(function(){window.open(e.href,"_blank")},1e3)}var t=["global-infrastructure-fund","infrastructure-built-to-last","a-case-for-global-listed-infrastructure","innovation-in-infrastructure-the-rise-of-the-yieldco","mlps-and-beyond-the-growing-opportunity-in-midstream-energy","a-case-for-midstream-energy"];$.each(t,function(t,s){s="."+s,$(s).length>0&&$(s+" a.download-lit").on("click",function(){return e(this,"_trackEvent","Campaigns","Global Infrastructure Fund","download"),!1})})});